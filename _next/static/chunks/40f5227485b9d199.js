(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},59544,3812,67073,32098,39964,6661,e=>{"use strict";var t=e.i(43476),s=e.i(932);function a(e){let a,r,l,o,i,n,c,d,m=(0,s.c)(12);m[0]!==e?({children:a,variant:l,size:o,className:i,...r}=e,m[0]=e,m[1]=a,m[2]=r,m[3]=l,m[4]=o,m[5]=i):(a=m[1],r=m[2],l=m[3],o=m[4],i=m[5]);let x=void 0===l?"primary":l,u=void 0===o?"md":o,h=void 0===i?"":i;m[6]===Symbol.for("react.memo_cache_sentinel")?(n={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-slate-700 hover:bg-slate-600 text-slate-200",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white"},m[6]=n):n=m[6];let p=n;m[7]===Symbol.for("react.memo_cache_sentinel")?(c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},m[7]=c):c=m[7];let b=c,g=`inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap ${p[x]} ${b[u]} ${h}`;return m[8]!==a||m[9]!==r||m[10]!==g?(d=(0,t.jsx)("button",{className:g,...r,children:a}),m[8]=a,m[9]=r,m[10]=g,m[11]=d):d=m[11],d}e.s(["Button",()=>a],59544);var r=e.i(71645);let l=(0,r.forwardRef)(({label:e,error:s,className:a="",...r},l)=>(0,t.jsxs)("div",{className:"w-full",children:[e&&(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:e}),(0,t.jsx)("input",{ref:l,className:`w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${s?"border-red-500":""} ${a}`,...r}),s&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-400",children:s})]}));l.displayName="Input",e.s(["Input",0,l],3812);let o=(0,r.forwardRef)(({label:e,error:s,options:a,className:r="",...l},o)=>(0,t.jsxs)("div",{className:"w-full",children:[e&&(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:e}),(0,t.jsxs)("select",{ref:o,className:`w-full px-3 py-2.5 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors cursor-pointer appearance-none bg-no-repeat bg-right pr-10 ${s?"border-red-500":""} ${r}`,style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E\")",backgroundSize:"1.5rem",backgroundPosition:"right 0.5rem center"},...l,children:[(0,t.jsx)("option",{value:"",disabled:!0,className:"bg-slate-800 text-slate-400",children:"Seleccionar..."}),a.map(e=>(0,t.jsx)("option",{value:e.value,className:"bg-slate-800 text-slate-100 py-2",children:e.label},e.value))]}),s&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-400",children:s})]}));o.displayName="Select",e.s(["Select",0,o],67073);var i=e.i(37727);function n(e){let a,l,o,n,c,d,m,x,u,h,p=(0,s.c)(22),{isOpen:b,onClose:g,title:f,children:j}=e;return(p[0]!==b||p[1]!==g?(a=()=>{let e=e=>{"Escape"===e.key&&g()};return b&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},l=[b,g],p[0]=b,p[1]=g,p[2]=a,p[3]=l):(a=p[2],l=p[3]),(0,r.useEffect)(a,l),b)?(p[4]!==g?(o=(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:g}),p[4]=g,p[5]=o):o=p[5],p[6]!==f?(n=(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:f}),p[6]=f,p[7]=n):n=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(i.X,{className:"w-5 h-5 text-slate-400"}),p[8]=c):c=p[8],p[9]!==g?(d=(0,t.jsx)("button",{onClick:g,className:"p-1 rounded-lg hover:bg-slate-700 transition-colors",children:c}),p[9]=g,p[10]=d):d=p[10],p[11]!==n||p[12]!==d?(m=(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700",children:[n,d]}),p[11]=n,p[12]=d,p[13]=m):m=p[13],p[14]!==j?(x=(0,t.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:j}),p[14]=j,p[15]=x):x=p[15],p[16]!==m||p[17]!==x?(u=(0,t.jsxs)("div",{className:"relative bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",children:[m,x]}),p[16]=m,p[17]=x,p[18]=u):u=p[18],p[19]!==o||p[20]!==u?(h=(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o,u]}),p[19]=o,p[20]=u,p[21]=h):h=p[21],h):null}function c(e){let a,r=(0,s.c)(3),{children:l,className:o}=e,i=`bg-slate-800 rounded-xl border border-slate-700 ${void 0===o?"":o}`;return r[0]!==l||r[1]!==i?(a=(0,t.jsx)("div",{className:i,children:l}),r[0]=l,r[1]=i,r[2]=a):a=r[2],a}function d(e){let a,r=(0,s.c)(3),{children:l,className:o}=e,i=`px-6 py-4 border-b border-slate-700 ${void 0===o?"":o}`;return r[0]!==l||r[1]!==i?(a=(0,t.jsx)("div",{className:i,children:l}),r[0]=l,r[1]=i,r[2]=a):a=r[2],a}function m(e){let a,r=(0,s.c)(3),{children:l,className:o}=e,i=`p-6 ${void 0===o?"":o}`;return r[0]!==l||r[1]!==i?(a=(0,t.jsx)("div",{className:i,children:l}),r[0]=l,r[1]=i,r[2]=a):a=r[2],a}e.s(["Modal",()=>n],32098),e.s(["Card",()=>c,"CardContent",()=>m,"CardHeader",()=>d],39964);let x=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var u=e.i(31278),h=e.i(7471);function p({value:e,onChange:s,onRemove:a}){let[l,o]=(0,r.useState)(!1),[n,c]=(0,r.useState)(null),d=(0,r.useRef)(null);async function m(e){let t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void c("Solo se permiten imágenes");if(t.size>5242880)return void c("La imagen no debe superar 5MB");o(!0),c(null);try{let e=t.name.split(".").pop(),a=`${Date.now()}-${Math.random().toString(36).substring(2)}.${e}`,r=`productos/${a}`,{error:l}=await h.supabase.storage.from("imagenes").upload(r,t);if(l)throw l;let{data:o}=h.supabase.storage.from("imagenes").getPublicUrl(r);s(o.publicUrl)}catch(e){console.error("Error uploading image:",e),c(e.message||"Error al subir la imagen")}finally{o(!1),d.current&&(d.current.value="")}}}async function p(){if(!e)return;let t=e.split("/imagenes/");if(t.length>1){let e=t[1];await h.supabase.storage.from("imagenes").remove([e])}a?.(),s("")}return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Imagen del producto"}),e?(0,t.jsxs)("div",{className:"relative w-full h-48 rounded-lg overflow-hidden border border-slate-600",children:[(0,t.jsx)("img",{src:e,alt:"Producto",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:p,className:"absolute top-2 right-2 p-1.5 bg-red-600 hover:bg-red-700 rounded-full transition-colors",children:(0,t.jsx)(i.X,{className:"w-4 h-4 text-white"})})]}):(0,t.jsxs)("label",{className:`flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-600 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-slate-800/50 transition-colors ${l?"pointer-events-none opacity-50":""}`,children:[(0,t.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:m,className:"hidden",disabled:l}),l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Loader2,{className:"w-10 h-10 text-blue-500 animate-spin mb-2"}),(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Subiendo imagen..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"p-3 bg-slate-700 rounded-full mb-3",children:(0,t.jsx)(x,{className:"w-6 h-6 text-slate-400"})}),(0,t.jsx)("span",{className:"text-sm text-slate-300 font-medium",children:"Clic para subir imagen"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),n&&(0,t.jsx)("p",{className:"mt-2 text-sm text-red-400",children:n})]})}e.s(["ImageUpload",()=>p],6661)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},38378,84614,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(55436),r=e.i(88844),l=e.i(37727);function o({productos:e,onSelect:o,formatearPrecio:i}){let[n,c]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)(0),h=(0,s.useRef)(null),p=(0,s.useRef)(null),b=n.trim()?e.filter(e=>e.nombre.toLowerCase().includes(n.toLowerCase())||e.descripcion?.toLowerCase().includes(n.toLowerCase())).slice(0,8):e.slice(0,8);function g(e){e.stock<=0||(o(e),c(""),h.current?.focus(),m(!1))}return(0,s.useEffect)(()=>{u(0)},[n]),(0,s.useEffect)(()=>{if(x>=0&&p.current){let e=p.current.children[x];e&&e.scrollIntoView({block:"nearest"})}},[x]),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{ref:h,type:"text",value:n,onChange:e=>{c(e.target.value),m(!0)},onFocus:()=>m(!0),onKeyDown:function(e){if(!d){("ArrowDown"===e.key||"Enter"===e.key)&&m(!0);return}switch(e.key){case"ArrowDown":e.preventDefault(),u(e=>e<b.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),u(e=>e>0?e-1:0);break;case"Enter":e.preventDefault(),b[x]&&g(b[x]);break;case"Escape":m(!1)}},placeholder:"Buscar producto por nombre...",className:"w-full pl-10 pr-10 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),n&&(0,t.jsx)("button",{type:"button",onClick:()=>{c(""),h.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-600 rounded",children:(0,t.jsx)(l.X,{className:"w-4 h-4 text-slate-400"})})]}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),(0,t.jsxs)("div",{ref:p,className:"absolute z-20 w-full mt-2 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-80 overflow-y-auto",children:[0===b.length?(0,t.jsx)("div",{className:"p-4 text-center text-slate-400",children:"No se encontraron productos"}):b.map((e,s)=>(0,t.jsxs)("button",{type:"button",onClick:()=>g(e),disabled:e.stock<=0,className:`w-full flex items-center gap-3 p-3 text-left transition-colors ${s===x?"bg-blue-600/30":"hover:bg-slate-700/50"} ${e.stock<=0?"opacity-50 cursor-not-allowed":""} ${s!==b.length-1?"border-b border-slate-700/50":""}`,children:[e.imagen_url?(0,t.jsx)("img",{src:e.imagen_url,alt:e.nombre,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}):(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-slate-700 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(r.Package,{className:"w-6 h-6 text-slate-500"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-slate-100 truncate",children:e.nombre}),e.descripcion&&(0,t.jsx)("p",{className:"text-sm text-slate-400 truncate",children:e.descripcion}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-green-400",children:i(e.precio)}),(0,t.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded ${e.stock>10?"bg-green-900/50 text-green-400":e.stock>0?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:e.stock>0?`Stock: ${e.stock}`:"Sin stock"})]})]})]},e.id)),e.length>8&&!n&&(0,t.jsxs)("div",{className:"p-2 text-center text-xs text-slate-500 border-t border-slate-700",children:["Escribe para buscar entre ",e.length," productos"]})]})]})]})}e.s(["ProductSearch",()=>o],38378);let i=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>i],84614)},16787,64601,e=>{"use strict";e.i(59544),e.i(3812),e.i(67073),e.i(32098),e.i(39964),e.i(6661),e.i(38378);var t=e.i(43476),s=e.i(932),a=e.i(71645),r=e.i(84614),l=e.i(7233);function o(e){let o,i,n,c,d,m,x,u,h,p,b,g=(0,s.c)(25),{clientes:f,value:j,onChange:v,placeholder:N}=e,y=void 0===N?"Buscar o escribir nombre del cliente...":N,[w,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(0),_=(0,a.useRef)(null),$=(0,a.useRef)(null),E=j.trim()?f.filter(e=>e.nombre.toLowerCase().includes(j.toLowerCase().trim())):f;if(g[0]!==f||g[1]!==j){let e;g[3]!==j?(e=e=>e.nombre.toLowerCase()===j.toLowerCase().trim(),g[3]=j,g[4]=e):e=g[4],o=f.some(e),g[0]=f,g[1]=j,g[2]=o}else o=g[2];let P=o;g[5]!==P||g[6]!==j?(i=j.trim()&&!P,g[5]=P,g[6]=j,g[7]=i):i=g[7];let M=i;g[8]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{let e=function(e){_.current&&!_.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},c=[],g[8]=n,g[9]=c):(n=g[8],c=g[9]),(0,a.useEffect)(n,c),g[10]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{S(0)},g[10]=d):d=g[10],g[11]!==j?(m=[j],g[11]=j,g[12]=m):m=g[12],(0,a.useEffect)(d,m);let D=function(e){let t=E.length+ +!!M;if("ArrowDown"===e.key)e.preventDefault(),k(!0),S(e=>(e+1)%t);else if("ArrowUp"===e.key)e.preventDefault(),k(!0),S(e=>(e-1+t)%t);else if("Enter"===e.key&&w)if(e.preventDefault(),M&&0===C)k(!1);else{let e=M?C-1:C;E[e]&&(v(E[e].nombre),k(!1))}else"Escape"===e.key&&k(!1)},I=function(e){v(e),k(!1),$.current?.focus()};g[13]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(r.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),g[13]=x):x=g[13],g[14]!==v?(u=e=>{v(e.target.value),k(!0)},g[14]=v,g[15]=u):u=g[15],g[16]===Symbol.for("react.memo_cache_sentinel")?(h=()=>k(!0),g[16]=h):h=g[16],g[17]!==D||g[18]!==y||g[19]!==u||g[20]!==j?(p=(0,t.jsxs)("div",{className:"relative",children:[x,(0,t.jsx)("input",{ref:$,type:"text",value:j,onChange:u,onFocus:h,onKeyDown:D,placeholder:y,className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),g[17]=D,g[18]=y,g[19]=u,g[20]=j,g[21]=p):p=g[21];let L=w&&(E.length>0||M)&&(0,t.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-xl max-h-60 overflow-y-auto",children:[M&&(0,t.jsxs)("button",{type:"button",onClick:()=>{k(!1)},className:`w-full px-4 py-3 flex items-center gap-3 text-left transition-colors border-b border-slate-700 ${0===C?"bg-blue-600/30":"hover:bg-slate-700/50"}`,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-600/30 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(l.Plus,{className:"w-4 h-4 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-green-400 font-medium",children:"Crear nuevo cliente"}),(0,t.jsxs)("p",{className:"text-slate-300 font-medium",children:['"',j.trim(),'"']})]})]}),E.map((e,s)=>{let a=M?s+1:s;return(0,t.jsxs)("button",{type:"button",onClick:()=>I(e.nombre),className:`w-full px-4 py-3 flex items-center gap-3 text-left transition-colors ${C===a?"bg-slate-700":"hover:bg-slate-700/50"}`,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-600 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(r.User,{className:"w-4 h-4 text-slate-300"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-slate-100 font-medium truncate",children:e.nombre}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Cliente registrado"})]})]},e.id)}),0===E.length&&!M&&(0,t.jsx)("div",{className:"px-4 py-3 text-center text-slate-400 text-sm",children:"No se encontraron clientes"})]});return g[22]!==p||g[23]!==L?(b=(0,t.jsxs)("div",{ref:_,className:"relative",children:[p,L]}),g[22]=p,g[23]=L,g[24]=b):b=g[24],b}e.s(["ClienteSearch",()=>o],64601),e.s([],16787)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},26242,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(7233),r=e.i(88699),l=e.i(27612),o=e.i(88844),i=e.i(75254);let n=(0,i.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),c=(0,i.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var d=e.i(7471);e.i(16787);var m=e.i(59544),x=e.i(3812),u=e.i(32098),h=e.i(39964),p=e.i(67073),b=e.i(6661),g=e.i(91193),f=e.i(57688),j=e.i(43796),v=e.i(932);function N(e){let s,a,r,l,o=(0,v.c)(6),{productId:i,productName:n,price:c}=e,d=`

  ${window.location.origin}/productos/show?id=${i}

*Producto:* ${n}

*Precio:* ${c}

Hola, me gustar\xeda adquirir m\xe1s informaci\xf3n / comprar.
`;o[0]!==d?(s=d.trim(),o[0]=d,o[1]=s):s=o[1];let m=s,x=`https://wa.me/584125509698?text=${encodeURIComponent(m)}`;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),r=(0,t.jsx)("span",{className:"text-lg",children:"Adquirir Información"}),o[2]=a,o[3]=r):(a=o[2],r=o[3]),o[4]!==x?(l=(0,t.jsxs)("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"w-full  inline-flex items-center justify-center gap-2   bg-[#25D366] hover:bg-[#20bd5a]   text-white font-bold py-3 px-6 rounded-lg  transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-1 cursor-pointer",children:[a,r]}),o[4]=x,o[5]=l):l=o[5],l}function y(){let e=(0,j.useIsAdmin)(),[i,v]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[k,C]=(0,s.useState)(!0),[S,_]=(0,s.useState)(!1),[$,E]=(0,s.useState)("all"),[P,M]=(0,s.useState)("all"),[D,I]=(0,s.useState)(null),[L,U]=(0,s.useState)("grid"),[A,B]=(0,s.useState)({nombre:"",descripcion:"",precio:"",stock:"",categoria_id:"",imagen_url:""}),{formatearPrecio:F}=(0,g.useMoneda)(),z=(0,s.useMemo)(()=>{let e=i;return"all"===$&&(e=i),"all"!==$&&(e=[...i].sort((e,t)=>{let s="pendiente"===$?e.stock>0:e.stock<=0,a="pendiente"===$?t.stock>0:t.stock<=0;return s&&!a?-1:!s&&a?1:0})),"all"!==P&&(e=e.filter(e=>!!e.categoria&&e.categoria.id===P)),"all"===P&&(e=e.filter(e=>!e.categoria||e.categoria.id!==P)),e},[$,i,P]);function T(e){U(e),localStorage.setItem("productos-view",e)}async function R(){let[e,t]=await Promise.all([d.supabase.from("productos").select("*, categoria:categorias(*)").order("stock",{ascending:!1}).order("created_at",{ascending:!1}),d.supabase.from("categorias").select("*").order("nombre")]);e.error?console.error("Error fetching productos:",e.error):v(e.data||[]),t.error?console.error("Error fetching categorias:",t.error):w(t.data||[]),C(!1)}function V(e){e?(I(e),B({nombre:e.nombre,descripcion:e.descripcion||"",precio:e.precio.toString(),stock:e.stock.toString(),categoria_id:e.categoria_id||"",imagen_url:e.imagen_url||""})):(I(null),B({nombre:"",descripcion:"",precio:"",stock:"0",categoria_id:"",imagen_url:""})),_(!0)}function q(){_(!1),I(null),B({nombre:"",descripcion:"",precio:"",stock:"0",categoria_id:"",imagen_url:""})}async function O(e){e.preventDefault();let t={nombre:A.nombre,descripcion:A.descripcion||null,precio:parseFloat(A.precio),stock:parseInt(A.stock),categoria_id:A.categoria_id||null,imagen_url:A.imagen_url||null};if(D){let{error:e}=await d.supabase.from("productos").update(t).eq("id",D.id);if(e)return void console.error("Error updating producto:",e)}else{let{error:e}=await d.supabase.from("productos").insert(t);if(e)return void console.error("Error creating producto:",e)}q(),R()}async function G(e){if(!confirm("¿Estás seguro de eliminar este producto?"))return;let{error:t}=await d.supabase.from("productos").delete().eq("id",e);t?console.error("Error deleting producto:",t):R()}return((0,s.useEffect)(()=>{R();let e=localStorage.getItem("productos-view");e&&U(e)},[]),k)?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-slate-400",children:"Cargando..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsx)("p",{className:"text-slate-400 text-sm sm:text-base",children:"Gestiona tu inventario de productos (precios en USD)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 items-center gap-2 w-full sm:w-auto",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(p.Select,{label:"Filtrar por categoría",value:P,onChange:e=>M(e.target.value),options:[{value:"all",label:"Todas las categorías"},...y.map(e=>({value:e.id,label:e.nombre}))]})}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(p.Select,{label:"Filtrar por disponibilidad",value:$,onChange:e=>E(e.target.value),options:[{value:"all",label:"Todos los estados"},{value:"pendiente",label:"Disponibles"},{value:"parcial",label:"Vendidos"}]})}),e&&(0,t.jsxs)("div",{className:"flex items-center w-20 bg-slate-800 rounded-lg p-1 border border-slate-700",children:[(0,t.jsx)("button",{onClick:()=>T("grid"),className:`p-2 rounded-md transition-colors ${"grid"===L?"bg-blue-600 text-white":"text-slate-400 hover:text-slate-200"}`,title:"Vista de cuadrícula",children:(0,t.jsx)(n,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>T("table"),className:`p-2 rounded-md transition-colors ${"table"===L?"bg-blue-600 text-white":"text-slate-400 hover:text-slate-200"}`,title:"Vista de tabla",children:(0,t.jsx)(c,{className:"w-4 h-4"})})]}),e&&(0,t.jsxs)(m.Button,{onClick:()=>V(),className:"flex-1 sm:flex-none",children:[(0,t.jsx)(a.Plus,{className:"w-4 h-4 mr-2"}),"Nuevo Producto"]})]})]}),0===z.length?(0,t.jsx)(h.Card,{children:(0,t.jsxs)(h.CardContent,{className:"text-center py-12",children:[(0,t.jsx)(o.Package,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-400",children:"No hay productos registrados"}),(0,t.jsx)(m.Button,{onClick:()=>V(),className:"mt-4",children:"Crear primer producto"})]})}):(0,t.jsxs)(t.Fragment,{children:["grid"===L&&(0,t.jsx)("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:z.map(s=>(0,t.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden hover:border-slate-600 transition-all hover:shadow-lg hover:shadow-slate-900/50 group",children:[(0,t.jsxs)("div",{className:"relative aspect-[1/1.3] bg-slate-700/50 overflow-hidden",children:[s.imagen_url?(0,t.jsx)(f.default,{src:s.imagen_url,alt:s.nombre,width:400,height:400,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ${s.stock<=0?"opacity-50 grayscale":""}`}):(0,t.jsx)("div",{className:`w-full h-full flex items-center justify-center ${s.stock<=0?"opacity-50":""}`,children:(0,t.jsx)(o.Package,{className:"w-16 h-16 text-slate-600"})}),s.stock<=0&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:(0,t.jsx)("div",{className:"px-4 py-2 border-4 border-red-600 rounded-sm -rotate-12 shadow-lg",children:(0,t.jsx)("span",{className:"text-2xl font-black text-red-600 tracking-widest uppercase",children:"AGOTADO"})})}),s.stock>0&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsxs)("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${s.stock>10?"bg-green-900/80 text-green-400":"bg-yellow-900/80 text-yellow-400"}`,children:[s.stock," en stock"]})}),s.categoria&&(0,t.jsx)("div",{className:"absolute top-2 left-2",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-slate-900/80 rounded-md text-xs text-slate-300",children:s.categoria.nombre})})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-100 truncate mb-1",title:s.nombre,children:s.nombre}),s.descripcion&&(0,t.jsx)("p",{className:"text-sm text-slate-400 line-clamp-2 mb-3 min-h-10",children:s.descripcion}),!s.descripcion&&(0,t.jsx)("div",{className:"mb-3 min-h-10"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-xl font-bold text-green-400",children:F(s.precio)}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:["$ ",s.precio.toFixed(2)," USD"]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>V(s),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm text-slate-200 transition-colors",children:[(0,t.jsx)(r.Pencil,{className:"w-4 h-4"}),"Editar"]}),(0,t.jsx)("button",{onClick:()=>G(s.id),className:"p-2 bg-slate-700 hover:bg-red-900/50 rounded-lg transition-colors group/btn",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4 text-slate-400 group-hover/btn:text-red-400"})})]}):(0,t.jsx)(N,{productName:s.nombre,productId:s.id,price:`$ ${s.precio} al cambio BCV`})})]})]},s.id))}),"table"===L&&(0,t.jsx)("div",{className:"hidden md:block bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,t.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Producto"}),(0,t.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Categoría"}),(0,t.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-slate-400",children:"Precio"}),(0,t.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-slate-400",children:"Stock"}),(0,t.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-slate-400",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:i.map(e=>(0,t.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.imagen_url?(0,t.jsx)(f.default,{src:e.imagen_url,alt:e.nombre,width:400,height:400,className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-700 flex items-center justify-center",children:(0,t.jsx)(o.Package,{className:"w-5 h-5 text-slate-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-slate-100",children:e.nombre}),e.descripcion&&(0,t.jsx)("p",{className:"text-sm text-slate-400 truncate max-w-xs",children:e.descripcion})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.categoria?(0,t.jsx)("span",{className:"px-2 py-1 bg-slate-700 rounded-md text-sm text-slate-300",children:e.categoria.nombre}):(0,t.jsx)("span",{className:"text-slate-500 text-sm",children:"Sin categoría"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-slate-100",children:F(e.precio)}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:["$ ",e.precio.toFixed(2)," USD"]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded-md text-sm ${e.stock>10?"bg-green-900/50 text-green-400":e.stock>0?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:e.stock})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>V(e),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(r.Pencil,{className:"w-4 h-4 text-slate-400"})}),(0,t.jsx)("button",{onClick:()=>G(e.id),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4 text-red-400"})})]})})]},e.id))})]})}),(0,t.jsx)("div",{className:"md:hidden space-y-4",children:"table"===L?z.map(e=>(0,t.jsx)(h.Card,{children:(0,t.jsx)(h.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[e.imagen_url?(0,t.jsx)(f.default,{src:e.imagen_url,alt:e.nombre,width:400,height:400,className:"w-16 h-16 rounded-lg object-cover shrink-0"}):(0,t.jsx)("div",{className:"w-16 h-16 rounded-lg bg-slate-700 flex items-center justify-center shrink-0",children:(0,t.jsx)(o.Package,{className:"w-8 h-8 text-slate-500"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-slate-100 truncate",children:e.nombre}),e.categoria&&(0,t.jsx)("span",{className:"inline-block px-2 py-0.5 bg-slate-700 rounded text-xs text-slate-300 mt-1",children:e.categoria.nombre})]}),(0,t.jsxs)("div",{className:"flex gap-1 shrink-0 ml-2",children:[(0,t.jsx)("button",{onClick:()=>V(e),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(r.Pencil,{className:"w-4 h-4 text-slate-400"})}),(0,t.jsx)("button",{onClick:()=>G(e.id),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4 text-red-400"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-100",children:F(e.precio)}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:["$ ",e.precio.toFixed(2)," USD"]})]}),(0,t.jsxs)("span",{className:`px-2 py-1 rounded-md text-sm ${e.stock>10?"bg-green-900/50 text-green-400":e.stock>0?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:["Stock: ",e.stock]})]})]})]})})},e.id)):(0,t.jsx)("div",{className:"grid gap-4",children:z.map(s=>(0,t.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden hover:border-slate-600 transition-all hover:shadow-lg hover:shadow-slate-900/50 group",children:[(0,t.jsxs)("div",{className:"relative aspect-[1/1.2] bg-slate-700/50 overflow-hidden",children:[s.imagen_url?(0,t.jsx)(f.default,{src:s.imagen_url,alt:s.nombre,width:400,height:400,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ${s.stock<=0?"opacity-50 grayscale":""}`}):(0,t.jsx)("div",{className:`w-full h-full flex items-center justify-center ${s.stock<=0?"opacity-50":""}`,children:(0,t.jsx)(o.Package,{className:"w-16 h-16 text-slate-600"})}),s.stock<=0&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:(0,t.jsx)("div",{className:"px-4 py-2 border-4 border-red-600 rounded-sm -rotate-12 shadow-lg",children:(0,t.jsx)("span",{className:"text-2xl font-black text-red-600 tracking-widest uppercase",children:"AGOTADO"})})}),s.stock>0&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsxs)("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${s.stock>10?"bg-green-900/80 text-green-400":"bg-yellow-900/80 text-yellow-400"}`,children:[s.stock," en stock"]})}),s.categoria&&(0,t.jsx)("div",{className:"absolute top-2 left-2",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-slate-900/80 rounded-md text-xs text-slate-300",children:s.categoria.nombre})})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-100 truncate mb-1",title:s.nombre,children:s.nombre}),s.descripcion&&(0,t.jsx)("p",{className:"text-sm text-slate-400 line-clamp-2 mb-3 min-h-10",children:s.descripcion}),!s.descripcion&&(0,t.jsx)("div",{className:"mb-3 min-h-10"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-xl font-bold text-green-400",children:F(s.precio)}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:["$ ",s.precio.toFixed(2)," USD"]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>V(s),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm text-slate-200 transition-colors",children:[(0,t.jsx)(r.Pencil,{className:"w-4 h-4"}),"Editar"]}),(0,t.jsx)("button",{onClick:()=>G(s.id),className:"p-2 bg-slate-700 hover:bg-red-900/50 rounded-lg transition-colors group/btn",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4 text-slate-400 group-hover/btn:text-red-400"})})]}):(0,t.jsx)(N,{productName:s.nombre,productId:s.id,price:`$ ${s.precio} al cambio BCV`})})]})]},s.id))})})]}),e&&(0,t.jsx)(u.Modal,{isOpen:S,onClose:q,title:D?"Editar Producto":"Nuevo Producto",children:(0,t.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,t.jsx)(x.Input,{label:"Nombre",value:A.nombre,onChange:e=>B({...A,nombre:e.target.value}),required:!0}),(0,t.jsx)(x.Input,{label:"Descripción (opcional)",value:A.descripcion,onChange:e=>B({...A,descripcion:e.target.value})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(x.Input,{label:"Precio (USD)",type:"number",step:"0.01",min:"0",value:A.precio,onChange:e=>B({...A,precio:e.target.value}),required:!0}),(0,t.jsx)(x.Input,{label:"Stock",type:"number",min:"0",value:A.stock,onChange:e=>B({...A,stock:e.target.value}),required:!0})]}),(0,t.jsx)(p.Select,{label:"Categoría",value:A.categoria_id,onChange:e=>B({...A,categoria_id:e.target.value}),options:y.map(e=>({value:e.id,label:e.nombre}))}),(0,t.jsx)(b.ImageUpload,{value:A.imagen_url,onChange:e=>B({...A,imagen_url:e})}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(m.Button,{type:"button",variant:"secondary",onClick:q,children:"Cancelar"}),(0,t.jsx)(m.Button,{type:"submit",variant:"success",children:D?"Guardar Cambios":"Crear Producto"})]})]})})]})}e.s(["default",()=>y],26242)}]);