(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},59544,3812,67073,32098,39964,6661,e=>{"use strict";var t=e.i(43476),s=e.i(932);function r(e){let r,a,l,n,o,i,c,d,u=(0,s.c)(12);u[0]!==e?({children:r,variant:l,size:n,className:o,...a}=e,u[0]=e,u[1]=r,u[2]=a,u[3]=l,u[4]=n,u[5]=o):(r=u[1],a=u[2],l=u[3],n=u[4],o=u[5]);let m=void 0===l?"primary":l,x=void 0===n?"md":n,h=void 0===o?"":o;u[6]===Symbol.for("react.memo_cache_sentinel")?(i={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-slate-700 hover:bg-slate-600 text-slate-200",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white"},u[6]=i):i=u[6];let p=i;u[7]===Symbol.for("react.memo_cache_sentinel")?(c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},u[7]=c):c=u[7];let b=c,f=`inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap ${p[m]} ${b[x]} ${h}`;return u[8]!==r||u[9]!==a||u[10]!==f?(d=(0,t.jsx)("button",{className:f,...a,children:r}),u[8]=r,u[9]=a,u[10]=f,u[11]=d):d=u[11],d}e.s(["Button",()=>r],59544);var a=e.i(71645);let l=(0,a.forwardRef)(({label:e,error:s,className:r="",...a},l)=>(0,t.jsxs)("div",{className:"w-full",children:[e&&(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:e}),(0,t.jsx)("input",{ref:l,className:`w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${s?"border-red-500":""} ${r}`,...a}),s&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-400",children:s})]}));l.displayName="Input",e.s(["Input",0,l],3812);let n=(0,a.forwardRef)(({label:e,error:s,options:r,className:a="",...l},n)=>(0,t.jsxs)("div",{className:"w-full",children:[e&&(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:e}),(0,t.jsxs)("select",{ref:n,className:`w-full px-3 py-2.5 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors cursor-pointer appearance-none bg-no-repeat bg-right pr-10 ${s?"border-red-500":""} ${a}`,style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E\")",backgroundSize:"1.5rem",backgroundPosition:"right 0.5rem center"},...l,children:[(0,t.jsx)("option",{value:"",disabled:!0,className:"bg-slate-800 text-slate-400",children:"Seleccionar..."}),r.map(e=>(0,t.jsx)("option",{value:e.value,className:"bg-slate-800 text-slate-100 py-2",children:e.label},e.value))]}),s&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-400",children:s})]}));n.displayName="Select",e.s(["Select",0,n],67073);var o=e.i(37727);function i(e){let r,l,n,i,c,d,u,m,x,h,p=(0,s.c)(22),{isOpen:b,onClose:f,title:g,children:v}=e;return(p[0]!==b||p[1]!==f?(r=()=>{let e=e=>{"Escape"===e.key&&f()};return b&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},l=[b,f],p[0]=b,p[1]=f,p[2]=r,p[3]=l):(r=p[2],l=p[3]),(0,a.useEffect)(r,l),b)?(p[4]!==f?(n=(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:f}),p[4]=f,p[5]=n):n=p[5],p[6]!==g?(i=(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:g}),p[6]=g,p[7]=i):i=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(o.X,{className:"w-5 h-5 text-slate-400"}),p[8]=c):c=p[8],p[9]!==f?(d=(0,t.jsx)("button",{onClick:f,className:"p-1 rounded-lg hover:bg-slate-700 transition-colors",children:c}),p[9]=f,p[10]=d):d=p[10],p[11]!==i||p[12]!==d?(u=(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700",children:[i,d]}),p[11]=i,p[12]=d,p[13]=u):u=p[13],p[14]!==v?(m=(0,t.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:v}),p[14]=v,p[15]=m):m=p[15],p[16]!==u||p[17]!==m?(x=(0,t.jsxs)("div",{className:"relative bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",children:[u,m]}),p[16]=u,p[17]=m,p[18]=x):x=p[18],p[19]!==n||p[20]!==x?(h=(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n,x]}),p[19]=n,p[20]=x,p[21]=h):h=p[21],h):null}function c(e){let r,a=(0,s.c)(3),{children:l,className:n}=e,o=`bg-slate-800 rounded-xl border border-slate-700 ${void 0===n?"":n}`;return a[0]!==l||a[1]!==o?(r=(0,t.jsx)("div",{className:o,children:l}),a[0]=l,a[1]=o,a[2]=r):r=a[2],r}function d(e){let r,a=(0,s.c)(3),{children:l,className:n}=e,o=`px-6 py-4 border-b border-slate-700 ${void 0===n?"":n}`;return a[0]!==l||a[1]!==o?(r=(0,t.jsx)("div",{className:o,children:l}),a[0]=l,a[1]=o,a[2]=r):r=a[2],r}function u(e){let r,a=(0,s.c)(3),{children:l,className:n}=e,o=`p-6 ${void 0===n?"":n}`;return a[0]!==l||a[1]!==o?(r=(0,t.jsx)("div",{className:o,children:l}),a[0]=l,a[1]=o,a[2]=r):r=a[2],r}e.s(["Modal",()=>i],32098),e.s(["Card",()=>c,"CardContent",()=>u,"CardHeader",()=>d],39964);let m=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var x=e.i(31278),h=e.i(7471);function p({value:e,onChange:s,onRemove:r}){let[l,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(null),d=(0,a.useRef)(null);async function u(e){let t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void c("Solo se permiten imágenes");if(t.size>5242880)return void c("La imagen no debe superar 5MB");n(!0),c(null);try{let e=t.name.split(".").pop(),r=`${Date.now()}-${Math.random().toString(36).substring(2)}.${e}`,a=`productos/${r}`,{error:l}=await h.supabase.storage.from("imagenes").upload(a,t);if(l)throw l;let{data:n}=h.supabase.storage.from("imagenes").getPublicUrl(a);s(n.publicUrl)}catch(e){console.error("Error uploading image:",e),c(e.message||"Error al subir la imagen")}finally{n(!1),d.current&&(d.current.value="")}}}async function p(){if(!e)return;let t=e.split("/imagenes/");if(t.length>1){let e=t[1];await h.supabase.storage.from("imagenes").remove([e])}r?.(),s("")}return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Imagen del producto"}),e?(0,t.jsxs)("div",{className:"relative w-full h-48 rounded-lg overflow-hidden border border-slate-600",children:[(0,t.jsx)("img",{src:e,alt:"Producto",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:p,className:"absolute top-2 right-2 p-1.5 bg-red-600 hover:bg-red-700 rounded-full transition-colors",children:(0,t.jsx)(o.X,{className:"w-4 h-4 text-white"})})]}):(0,t.jsxs)("label",{className:`flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-600 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-slate-800/50 transition-colors ${l?"pointer-events-none opacity-50":""}`,children:[(0,t.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:u,className:"hidden",disabled:l}),l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Loader2,{className:"w-10 h-10 text-blue-500 animate-spin mb-2"}),(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Subiendo imagen..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"p-3 bg-slate-700 rounded-full mb-3",children:(0,t.jsx)(m,{className:"w-6 h-6 text-slate-400"})}),(0,t.jsx)("span",{className:"text-sm text-slate-300 font-medium",children:"Clic para subir imagen"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),i&&(0,t.jsx)("p",{className:"mt-2 text-sm text-red-400",children:i})]})}e.s(["ImageUpload",()=>p],6661)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},38378,84614,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(55436),a=e.i(88844),l=e.i(37727);function n({productos:e,onSelect:n,formatearPrecio:o}){let[i,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(0),h=(0,s.useRef)(null),p=(0,s.useRef)(null),b=i.trim()?e.filter(e=>e.nombre.toLowerCase().includes(i.toLowerCase())||e.descripcion?.toLowerCase().includes(i.toLowerCase())).slice(0,8):e.slice(0,8);function f(e){e.stock<=0||(n(e),c(""),h.current?.focus(),u(!1))}return(0,s.useEffect)(()=>{x(0)},[i]),(0,s.useEffect)(()=>{if(m>=0&&p.current){let e=p.current.children[m];e&&e.scrollIntoView({block:"nearest"})}},[m]),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{ref:h,type:"text",value:i,onChange:e=>{c(e.target.value),u(!0)},onFocus:()=>u(!0),onKeyDown:function(e){if(!d){("ArrowDown"===e.key||"Enter"===e.key)&&u(!0);return}switch(e.key){case"ArrowDown":e.preventDefault(),x(e=>e<b.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),x(e=>e>0?e-1:0);break;case"Enter":e.preventDefault(),b[m]&&f(b[m]);break;case"Escape":u(!1)}},placeholder:"Buscar producto por nombre...",className:"w-full pl-10 pr-10 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),i&&(0,t.jsx)("button",{type:"button",onClick:()=>{c(""),h.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-600 rounded",children:(0,t.jsx)(l.X,{className:"w-4 h-4 text-slate-400"})})]}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),(0,t.jsxs)("div",{ref:p,className:"absolute z-20 w-full mt-2 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-80 overflow-y-auto",children:[0===b.length?(0,t.jsx)("div",{className:"p-4 text-center text-slate-400",children:"No se encontraron productos"}):b.map((e,s)=>(0,t.jsxs)("button",{type:"button",onClick:()=>f(e),disabled:e.stock<=0,className:`w-full flex items-center gap-3 p-3 text-left transition-colors ${s===m?"bg-blue-600/30":"hover:bg-slate-700/50"} ${e.stock<=0?"opacity-50 cursor-not-allowed":""} ${s!==b.length-1?"border-b border-slate-700/50":""}`,children:[e.imagen_url?(0,t.jsx)("img",{src:e.imagen_url,alt:e.nombre,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}):(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-slate-700 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(a.Package,{className:"w-6 h-6 text-slate-500"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-slate-100 truncate",children:e.nombre}),e.descripcion&&(0,t.jsx)("p",{className:"text-sm text-slate-400 truncate",children:e.descripcion}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-green-400",children:o(e.precio)}),(0,t.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded ${e.stock>10?"bg-green-900/50 text-green-400":e.stock>0?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:e.stock>0?`Stock: ${e.stock}`:"Sin stock"})]})]})]},e.id)),e.length>8&&!i&&(0,t.jsxs)("div",{className:"p-2 text-center text-xs text-slate-500 border-t border-slate-700",children:["Escribe para buscar entre ",e.length," productos"]})]})]})]})}e.s(["ProductSearch",()=>n],38378);let o=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>o],84614)},16787,64601,e=>{"use strict";e.i(59544),e.i(3812),e.i(67073),e.i(32098),e.i(39964),e.i(6661),e.i(38378);var t=e.i(43476),s=e.i(932),r=e.i(71645),a=e.i(84614),l=e.i(7233);function n(e){let n,o,i,c,d,u,m,x,h,p,b,f=(0,s.c)(25),{clientes:g,value:v,onChange:j,placeholder:y}=e,N=void 0===y?"Buscar o escribir nombre del cliente...":y,[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(0),E=(0,r.useRef)(null),$=(0,r.useRef)(null),M=v.trim()?g.filter(e=>e.nombre.toLowerCase().includes(v.toLowerCase().trim())):g;if(f[0]!==g||f[1]!==v){let e;f[3]!==v?(e=e=>e.nombre.toLowerCase()===v.toLowerCase().trim(),f[3]=v,f[4]=e):e=f[4],n=g.some(e),f[0]=g,f[1]=v,f[2]=n}else n=f[2];let _=n;f[5]!==_||f[6]!==v?(o=v.trim()&&!_,f[5]=_,f[6]=v,f[7]=o):o=f[7];let L=o;f[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{let e=function(e){E.current&&!E.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},c=[],f[8]=i,f[9]=c):(i=f[8],c=f[9]),(0,r.useEffect)(i,c),f[10]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{S(0)},f[10]=d):d=f[10],f[11]!==v?(u=[v],f[11]=v,f[12]=u):u=f[12],(0,r.useEffect)(d,u);let D=function(e){let t=M.length+ +!!L;if("ArrowDown"===e.key)e.preventDefault(),k(!0),S(e=>(e+1)%t);else if("ArrowUp"===e.key)e.preventDefault(),k(!0),S(e=>(e-1+t)%t);else if("Enter"===e.key&&w)if(e.preventDefault(),L&&0===C)k(!1);else{let e=L?C-1:C;M[e]&&(j(M[e].nombre),k(!1))}else"Escape"===e.key&&k(!1)},P=function(e){j(e),k(!1),$.current?.focus()};f[13]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(a.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),f[13]=m):m=f[13],f[14]!==j?(x=e=>{j(e.target.value),k(!0)},f[14]=j,f[15]=x):x=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(h=()=>k(!0),f[16]=h):h=f[16],f[17]!==D||f[18]!==N||f[19]!==x||f[20]!==v?(p=(0,t.jsxs)("div",{className:"relative",children:[m,(0,t.jsx)("input",{ref:$,type:"text",value:v,onChange:x,onFocus:h,onKeyDown:D,placeholder:N,className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),f[17]=D,f[18]=N,f[19]=x,f[20]=v,f[21]=p):p=f[21];let B=w&&(M.length>0||L)&&(0,t.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-xl max-h-60 overflow-y-auto",children:[L&&(0,t.jsxs)("button",{type:"button",onClick:()=>{k(!1)},className:`w-full px-4 py-3 flex items-center gap-3 text-left transition-colors border-b border-slate-700 ${0===C?"bg-blue-600/30":"hover:bg-slate-700/50"}`,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-600/30 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(l.Plus,{className:"w-4 h-4 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-green-400 font-medium",children:"Crear nuevo cliente"}),(0,t.jsxs)("p",{className:"text-slate-300 font-medium",children:['"',v.trim(),'"']})]})]}),M.map((e,s)=>{let r=L?s+1:s;return(0,t.jsxs)("button",{type:"button",onClick:()=>P(e.nombre),className:`w-full px-4 py-3 flex items-center gap-3 text-left transition-colors ${C===r?"bg-slate-700":"hover:bg-slate-700/50"}`,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-600 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(a.User,{className:"w-4 h-4 text-slate-300"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-slate-100 font-medium truncate",children:e.nombre}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Cliente registrado"})]})]},e.id)}),0===M.length&&!L&&(0,t.jsx)("div",{className:"px-4 py-3 text-center text-slate-400 text-sm",children:"No se encontraron clientes"})]});return f[22]!==p||f[23]!==B?(b=(0,t.jsxs)("div",{ref:E,className:"relative",children:[p,B]}),f[22]=p,f[23]=B,f[24]=b):b=f[24],b}e.s(["ClienteSearch",()=>n],64601),e.s([],16787)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},2525,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(7233),a=e.i(88699),l=e.i(27612),n=e.i(7471);e.i(16787);var o=e.i(59544),i=e.i(3812),c=e.i(32098),d=e.i(39964);function u(){let[e,u]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[g,v]=(0,s.useState)({nombre:"",descripcion:""});async function j(){let{data:e,error:t}=await n.supabase.from("categorias").select("*").order("created_at",{ascending:!1});t?console.error("Error fetching categorias:",t):u(e||[]),x(!1)}function y(e){e?(f(e),v({nombre:e.nombre,descripcion:e.descripcion||""})):(f(null),v({nombre:"",descripcion:""})),p(!0)}function N(){p(!1),f(null),v({nombre:"",descripcion:""})}async function w(e){if(e.preventDefault(),b){let{error:e}=await n.supabase.from("categorias").update({nombre:g.nombre,descripcion:g.descripcion||null}).eq("id",b.id);if(e)return void console.error("Error updating categoria:",e)}else{let{error:e}=await n.supabase.from("categorias").insert({nombre:g.nombre,descripcion:g.descripcion||null});if(e)return void console.error("Error creating categoria:",e)}N(),j()}async function k(e){if(!confirm("¿Estás seguro de eliminar esta categoría?"))return;let{error:t}=await n.supabase.from("categorias").delete().eq("id",e);t?console.error("Error deleting categoria:",t):j()}return((0,s.useEffect)(()=>{j()},[]),m)?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-slate-400",children:"Cargando..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("p",{className:"text-slate-400",children:"Gestiona las categorías de tus productos"}),(0,t.jsxs)(o.Button,{onClick:()=>y(),children:[(0,t.jsx)(r.Plus,{className:"w-4 h-4 mr-2"}),"Nueva Categoría"]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:0===e.length?(0,t.jsx)(d.Card,{className:"col-span-full",children:(0,t.jsxs)(d.CardContent,{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-slate-400",children:"No hay categorías registradas"}),(0,t.jsx)(o.Button,{onClick:()=>y(),className:"mt-4",children:"Crear primera categoría"})]})}):e.map(e=>(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:e.nombre}),e.descripcion&&(0,t.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:e.descripcion})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>y(e),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(a.Pencil,{className:"w-4 h-4 text-slate-400"})}),(0,t.jsx)("button",{onClick:()=>k(e.id),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4 text-red-400"})})]})]})})},e.id))}),(0,t.jsx)(c.Modal,{isOpen:h,onClose:N,title:b?"Editar Categoría":"Nueva Categoría",children:(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,t.jsx)(i.Input,{label:"Nombre",value:g.nombre,onChange:e=>v({...g,nombre:e.target.value}),required:!0}),(0,t.jsx)(i.Input,{label:"Descripción (opcional)",value:g.descripcion,onChange:e=>v({...g,descripcion:e.target.value})}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(o.Button,{type:"button",variant:"secondary",onClick:N,children:"Cancelar"}),(0,t.jsx)(o.Button,{type:"submit",variant:"success",children:b?"Guardar Cambios":"Crear Categoría"})]})]})})]})}e.s(["default",()=>u])}]);